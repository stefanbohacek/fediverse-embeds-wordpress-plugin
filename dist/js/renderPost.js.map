{"version":3,"file":"renderPost.js","names":["renderPost","post","container","document","querySelector","concat","instance","post_id","postHasLabels","postIsDeleted","postIsUpdated","accountIsBot","accountIsOwner","renderedPost","createElement","renderedPostHTML","ftf_fediverse_embeds","config","deleted_posts","post_data","account","show_post_labels","roles","accountRoles","map","role","name","includes","bot","__status","className","username","edited_at","postText","content","postUrl","url","emojis","forEach","emoji","replaceAll","shortcode","window","blog_url","btoa","avatar_static","display_name","card","media_attachments","length","media","index","type","alt_text","width","height","cardSource","URL","hostname","html","image","title","description","poll","options","voteCounts","option","votes_count","voteCountMax","Math","max","votesTotal","reduce","total","num","pollOptionsCount","votesPortion","votesPercentage","round","expired","toLocaleString","postDate","Date","created_at","postDateDate","toLocaleDateString","navigator","language","month","year","day","postDateTime","toLocaleTimeString","editDate","editDateText","editDateDate","editDateTime","show_metrics","reblogs_count","favourites_count","replies_count","innerHTML","lastUrl","entities","urls","extended_entities","dataset","urlAttachment","expanded_url","urlAttachmentProcessed","parentNode","replaceChild","id"],"sources":["renderPost.js"],"sourcesContent":["const renderPost = (post, container) => {\n  if (!container){\n    container = document.querySelector(`blockquote[data-instance=\"${ post.instance }\"][data-post-id=\"${ post.post_id }\"]`)\n  }\n\n  // post.post_data = JSON.parse(post.post_data);\n\n  // console.log('post.post_data', post.post_data);\n  // console.log('debug:renderPost', {data, container});\n\n  // if (post.post_data.post_id === '123456789'){\n  // console.log('debug:renderPost', data);\n  // }\n\n  let postHasLabels = false;\n  let postIsDeleted = false;\n  let postIsUpdated = false;\n\n  let accountIsBot = false;\n  let accountIsOwner = false;\n\n\n  let renderedPost = document.createElement('div');\n  let renderedPostHTML = '';\n\n  if (postIsDeleted && ftf_fediverse_embeds.config.deleted_posts === 'redact'){\n    post.post_data.account = {};\n  }  \n\n  if (ftf_fediverse_embeds.config.show_post_labels && post.post_data.account.roles){\n    const accountRoles = post.post_data.account.roles.map(role => role.name);\n    if (accountRoles.includes('Owner')){\n      accountIsOwner = true;\n      postHasLabels = true;\n    }\n  }\n\n  if (post.post_data.account.bot){\n    accountIsBot = true;\n    postHasLabels = true;\n  }\n\n  if (post.__status){\n    if (post.__status === 'deleted'){\n      postIsDeleted = true;\n      postHasLabels = true;\n    }\n  }\n\n  if (postIsDeleted && ftf_fediverse_embeds.config.deleted_posts === 'hide'){\n    renderedPost.className = `fediverse-post fediverse-post-deleted`;\n\n    renderedPostHTML += `\n    <blockquote\n      data-instance=\"$instance\"\n      data-post-id=\"$post_id\"\n      class=\"ftf-fediverse-post-embed-removed\"\n    >\n      <p>This post by @${ post.post_data.account.username}@${ post.instance } was removed.</p>\n    </blockquote>\n    `;\n  } else {\n    renderedPost.className = `fediverse-post fediverse-post-rendered w-100 mt-4 mb-4`;\n\n    if (post.post_data.edited_at){\n      postIsUpdated = true;\n      postHasLabels = true;\n    }\n  \n    let postText = post.post_data.content,\n        postUrl = post.post_data.url,\n        entities = null;\n\n    renderedPostHTML += `\n          <div class=\"card w-100\">\n            <div class=\"post-body-wrapper card-body pt-4 pb-0\">\n              <div class=\"fediverse-post-labels position-absolute top-0 end-0 mt-1 me-1\">\n        `;\n  \n    if (post.post_data.emojis){\n      post.post_data.emojis.forEach(emoji => {\n        postText = postText.replaceAll(`:${emoji.shortcode}:`, `<img class=\"fediverse-post-emoji\" src=\"${window.ftf_fediverse_embeds.blog_url}/wp-json/ftf/media-proxy?url=${ window.btoa(emoji.url) }\" />`);\n      })\n    }\n  \n    if (postHasLabels){\n      renderedPostHTML += `<span class=\"badge rounded-pill text-bg-light\">`;\n  \n      if (postIsUpdated){\n        renderedPostHTML += `\n        <span\n          class=\"p-0\"\n          title=\"This post was updated.\"\n          aria-label=\"Updated post\"\n        >üìù</span>\n      `\n      }\n      if (postIsDeleted){\n        renderedPostHTML += `\n        <span\n          class=\"p-0\"\n          title=\"This post was deleted.\"\n          aria-label=\"Deleted post\"\n        >üóëÔ∏è</span>\n      `\n      }\n  \n      if (accountIsBot){\n        renderedPostHTML += `\n        <span\n          class=\"p-0\"\n          title=\"This is a bot account.\"\n          aria-label=\"Bot account\"\n        >ü§ñ</span>\n      `\n      }\n  \n      if (accountIsOwner){\n        renderedPostHTML += `\n        <span\n          class=\"p-0\"\n          title=\"This is an admin account.\"\n          aria-label=\"Admin account\"\n        >üëë</span>\n      `\n      }\n  \n      renderedPostHTML += `</span>`;\n    }\n          \n    renderedPostHTML += `\n      </div>\n      <div class=\"card-text\">\n      <div class=\"row no-gutters mb-1\">\n    `;\n  \n    // console.log('debug:post', post);\n   \n    if (post.post_data.account.avatar_static){\n      if (postIsDeleted && ftf_fediverse_embeds.config.deleted_posts === 'redact'){\n        // noop\n      } else {\n        renderedPostHTML += `\n        <div class=\"fediverse-post-profile-image-wrapper col-2 col-sm-2 col-md-2 p-2 pt-0 ps-sm-1 pe-sm-1 ps-md-2 pe-md-1 ps-lg-3 pe-lg-1\">\n          <a href=\"${ post.post_data.account.url }\" class=\"text-decoration-none\">\n            <img\n              title=\"Profile image\"\n              alt=\"Profile image of @${ post.post_data.account.display_name || post.post_data.account.username }\"\n              loading=\"lazy\"\n              class=\"post-author-image rounded-circle border\"\n              width=\"48\"\n              height=\"48\"\n              src=\"${window.ftf_fediverse_embeds.blog_url}/wp-json/ftf/media-proxy?url=${ window.btoa(post.post_data.account.avatar_static) }\"\n            >\n          </a>\n        </div>`;\n      }\n    }\n  \n    if (postIsDeleted && ftf_fediverse_embeds.config.deleted_posts === 'redact'){\n      renderedPostHTML += `\n      <div class=\"post-authorcol-12 col-sm-12 col-md-12 pb-3\">\n        <p class=\"font-weight-bold mb-0 mt-0\"></p>\n      </div>\n    `;\n    } else {\n      renderedPostHTML += `\n      <div class=\"post-author ${ \n        post.post_data.account.avatar_static ? 'col-10 col-sm-10 col-md-10 pl-2' : 'col-12 col-sm-12 col-md-12'\n      } pb-3\">\n        <p class=\"font-weight-bold mb-0 mt-0\">\n          <a\n            class=\"text-dark text-decoration-none\"\n            href=\"${ post.post_data.account.url }\"\n          >${ post.post_data.account.display_name }</a>\n        </p>\n        <p class=\"mb-1 mb-md-2 mt-0 fs-6\">\n          <a class=\"text-muted text-decoration-none\" href=\"${ post.post_data.account.url }\">\n            @${ post.post_data.account.username}@${ post.instance }\n          </a>\n        </p>\n      </div>\n    `;\n    }\n  \n    renderedPostHTML += `\n    </div>\n    <div class=\"post-body\">`;\n  \n    if (post.post_data.card){\n      // console.log('debug:post.post_data.card', post.post_data.card);\n    }\n    \n    if (post.post_data.media_attachments && post.post_data.media_attachments.length){\n      postText += `<div data-media-length=\"${ post.post_data.media_attachments.length }\" class=\"post-media row mt-3 no-gutters\">`;\n      \n      post.post_data.media_attachments.forEach((media, index) => {\n        // console.log('debug:media', media);\n  \n        if (post.post_data.media_attachments.length === 1){\n          postText += `<div data-media-type=\"${ media.type }\" class=\"text-center col-sm-12 col-md-12 col-lg-12\">`;\n        } else if (post.post_data.media_attachments.length === 3){\n          if (index === 2){\n            postText += `<div data-media-type=\"${ media.type }\" class=\"text-center col-sm-12 col-md-12 col-lg-12\">`;\n          } else {\n            postText += `<div data-media-type=\"${ media.type }\" class=\"text-center col-sm-12 col-md-6 col-lg-6\">`;\n          }\n        } else if (post.post_data.media_attachments.length > 1 && post.post_data.media_attachments.length < 5){\n          postText += `<div data-media-type=\"${ media.type }\" class=\"text-center col-sm-12 col-md-6 col-lg-6\">`;\n        } else {\n          postText += `<div data-media-type=\"${ media.type }\" class=\"text-center col-sm-12 col-md-3 col-lg-3\">`;\n        }\n        \n        if (media.type === 'gifv'){\n          postText += `<video class=\"w-100 mt-0\" controls loop>\n            <source src=\"${window.ftf_fediverse_embeds.blog_url}/wp-json/ftf/media-proxy?url=${ window.btoa(media.url) }\" type=\"video/mp4\">\n          </video>`;\n  \n          // <source src=\"${ media.url }\" type=\"video/mp4\">\n          // <source src=\"${window.ftf_fediverse_embeds.blog_url}/wp-json/ftf/media-proxy?url=${ window.btoa(media.url) }\" type=\"video/mp4\">\n        } else if (media.type === 'video'){\n          if (media.url){\n            // src=\"${window.ftf_fediverse_embeds.blog_url}/wp-json/ftf/media-proxy?url=${ window.btoa(media.url) }\"\n            // src=\"${ media.url }\"\n  \n            postText += `<video class=\"w-100 mt-0\" controls loop>\n              <source\n                src=\"${window.ftf_fediverse_embeds.blog_url}/wp-json/ftf/media-proxy?url=${ window.btoa(media.url) }\"\n                type=\"video/mp4\"\n              >\n              </video>`\n          }\n        } else if (media.type === 'audio'){\n          if (media.url){\n            // src=\"${window.ftf_fediverse_embeds.blog_url}/wp-json/ftf/media-proxy?url=${ window.btoa(media.url) }\"\n            // src=\"${ media.url }\"\n  \n            postText += `\n              <audio\n                controls\n                src=\"${window.ftf_fediverse_embeds.blog_url}/wp-json/ftf/media-proxy?url=${ window.btoa(media.url) }\"\n                class=\"w-100 mt-3 mb-3\"\n              ></audio>\n            `;\n          }\n  \n        } else if (media.type === 'image'){\n          postText += `<a href=\"${ postUrl }\" target=\"_blank\">\n            <img\n              alt=\"${ media.alt_text || '' }\"\n              loading=\"lazy\"\n              width=\"${ media.width }\"\n              height=\"${ media.height }\"\n              class=\"w-100 rounded border mb-3\"\n              src=\"${window.ftf_fediverse_embeds.blog_url}/wp-json/ftf/media-proxy?url=${ window.btoa(media.url) }\"\n            >\n          </a>`;\n        }\n        \n        postText += '</div>';\n      });\n      \n      postText += '</div>';\n    } else if (post.post_data.card){\n      let cardSource;\n  \n      if (post.post_data.card.url){\n        cardSource = (new URL(post.post_data.card.url));\n        cardSource = cardSource.hostname;\n      }\n  \n      if (post.post_data.card.html){\n        postText += `<div class=\"ratio ratio-16x9\">${ post.post_data.card.html}</div>`;\n      } else if (post.post_data.card.image){\n        postText += `\n        <div class=\"card mb-4\">\n          <a href=\"${ post.post_data.card.url }\">\n            <img src=\"${window.ftf_fediverse_embeds.blog_url}/wp-json/ftf/media-proxy?url=${ window.btoa(post.post_data.card.image) }\" class=\"card-img-top\" alt=\"...\">\n          </a>\n          <div class=\"card-body pb-1\">\n            <h5 class=\"card-title\">\n              <a href=\"${ post.post_data.card.title }\">\n                ${ post.post_data.card.title }\n              </a>\n            </h5>\n            <p class=\"card-text\"><small>${ post.post_data.card.description }</small></p>\n          </div>\n          <div class=\"card-footer pb-3 pt-0\">\n            <small class=\"text-muted\">\n              ${ cardSource }\n            </div>\n        </div>\n        `\n      } else {\n        postText += `\n        <div class=\"card mb-4\">\n        <div class=\"card-body pb-1\">\n            <h5 class=\"card-title\">\n              <a href=\"${ post.post_data.card.title }\">\n                ${ post.post_data.card.title }\n              </a>\n            </h5>\n            <p class=\"card-text\"><small>${ post.post_data.card.description }</small></p>\n          </div>\n          <div class=\"card-footer pb-3 pt-0\">\n            <small class=\"text-muted\">\n              ${ cardSource }\n            </div>\n        </div>\n        `\n      }\n    }\n    \n    if (post.post_data.poll){\n      postText += '<div class=\"mt-0 post-poll-results\">';\n  \n      if (post.post_data.poll.options && post.post_data.poll.options.length){\n          \n        const voteCounts = post.post_data.poll.options.map((option) => {\n          return option.votes_count;\n        });\n        \n        const voteCountMax = Math.max(...voteCounts);\n        const votesTotal = voteCounts.reduce((total, num) => {\n          return total + num;\n        });\n        \n        postText += `<div class=\"row\">`;\n  \n        const pollOptionsCount = post.post_data.poll.options;\n  \n        post.post_data.poll.options.forEach((option, index) => {\n          const votesPortion = option.votes_count/votesTotal * 100;\n          // const votesPercentage = post.post_data.poll.expired ? `${Math.round(option.votes_count/votesTotal * 100)}%` : '';\n          const votesPercentage = `${Math.round(option.votes_count/votesTotal * 100)}%`;\n  \n          postText += `\n            <div class=\"col-9\">\n              <p class=\"mb-2\">${ option.title }</p>\n            </div>\n            <div class=\"col-3 text-end\">\n              <span class=\"w-100\">${ votesPercentage }</span>\n            </div>\n            <div class=\"col-12\">\n              <div\n                class=\"progress ${ \n                  index === pollOptionsCount - 1 ? '' : ' mb-3 '\n                }\"\n              >\n                <div class=\"progress-bar ${ \n                  // post.post_data.poll.expired && option.votes_count === voteCountMax ? 'bg-primary' : ''\n                  post.post_data.poll.expired && option.votes_count === voteCountMax ? 'bg-primary' : ''\n                }\" \n                  role=\"progressbar\" \n                  xxxstyle=\"width: ${ post.post_data.poll.expired ? votesPortion : 0 }%\" \n                  xxxaria-valuenow=\"${ post.post_data.poll.expired ? votesPortion : 0 }\" \n                  style=\"width: ${ votesPortion }%\" \n                  aria-valuenow=\"${ votesPortion }\" \n                  aria-valuemin=\"0\" \n                  aria-valuemax=\"100\">\n                </div>\n              </div>\n            </div>\n        `;\n        });\n        postText += `<div class=\"col-12 mt-3\">\n          <p class=\"text-muted\">\n            <small>\n              ${ votesTotal.toLocaleString() } votes | ${ post.post_data.poll.expired ? 'Closed' : 'Open'}\n            </small>\n          </p>\n        </div>`;\n      }    \n  \n      postText += '</div></div>';\n    }\n    \n    const postDate = new Date(post.post_data.created_at);\n    const postDateDate = postDate.toLocaleDateString(navigator.language, { month: 'long', year: 'numeric', day: 'numeric' });\n    const postDateTime = postDate.toLocaleTimeString();\n    \n    let editDate, editDateText;\n  \n    if (postIsUpdated){\n      editDate = new Date(post.post_data.edited_at);    \n      const editDateDate = editDate.toLocaleDateString(navigator.language, { month: 'long', year: 'numeric', day: 'numeric' });\n      const editDateTime = editDate.toLocaleTimeString();\n      editDateText = `Updated on ${ editDateDate } at ${ editDateTime }`\n    }\n    \n    renderedPostHTML += postText + `</div>\n        </div>\n      </div>\n    <div class=\"card-footer pb-3\"><small>`;\n    \n    // if (!container){\n      if (ftf_fediverse_embeds.config.show_metrics){\n  \n        if (postIsDeleted && ftf_fediverse_embeds.config.deleted_posts === 'redact'){\n        } else {\n          renderedPostHTML += `\n          <small>\n            <span class=\"post-icon\" role=\"img\" aria-label=\"Reposts\">üîÅ</span>\n            <span class=\"text-muted\">${ post.post_data.reblogs_count.toLocaleString() }</span>\n            \n            <span class=\"post-icon\" role=\"img\" aria-label=\"Likes\">‚ù§Ô∏è</span>\n            <span class=\"text-muted\">${ post.post_data.favourites_count.toLocaleString() }</span>\n            \n            <span class=\"post-icon\" role=\"img\" aria-label=\"Replies\">üí¨</span>\n            <span class=\"text-muted\">${ post.post_data.replies_count.toLocaleString() }</span>\n          </small>\n          &centerdot; `;\n        }\n      }\n    // }\n  \n    if (postIsDeleted && ftf_fediverse_embeds.config.deleted_posts === 'redact'){\n      renderedPostHTML += `\n      <small>\n        This post was deleted.\n      </small>\n    `;\n    } else {\n      renderedPostHTML += `<a class=\"text-muted\" href=\"${ postUrl }\" target=\"_blank\">\n        <small title=\"${ editDate ? editDateText : '' }\">\n          ${ postDateDate } at ${ postDateTime }${ editDate ? '*' :'' }\n        </small>\n      </a>`;\n    }\n    \n    renderedPostHTML += '</small></div></div>';\n  }\n\n  renderedPost.innerHTML = renderedPostHTML;\n  \n  let lastUrl = '';\n  \n  if (post.entities && post.entities.urls && post.entities.urls.length){\n    lastUrl = post.entities.urls[post.entities.urls.length - 1];\n  }\n  \n  if ((post.post_data.media_attachments && post.post_data.media_attachments.length) || post.extended_entities && post.extended_entities.media && post.extended_entities.media.length){\n    lastUrl = '';\n  }\n  \n  if (lastUrl){\n    renderedPost.dataset.urlAttachment = lastUrl.expanded_url;\n    renderedPost.dataset.urlAttachmentProcessed = 'false';\n  }\n  \n  if (container){\n    const postContainer = container.querySelector('.post-body a:last-of-type');\n    container.parentNode.replaceChild(renderedPost, container);\n  } else {\n    const post = document.querySelector(`[data-post-id=\"${ post.id }\"]`);\n    post.parentNode.replaceChild(renderedPost, post);\n  }\n\n  return renderedPost;\n};\n\nexport { renderPost };\n"],"mappings":"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"}