{"version":3,"file":"renderPost.js","names":["renderPost","post","container","console","log","document","querySelector","concat","instance","post_id","postHasLabels","postIsDeleted","postIsUpdated","accountIsBot","accountIsOwner","renderedPost","createElement","renderedPostHTML","post_data","account","bot","__status","dataset","bsTheme","ftf_fediverse_embeds","config","theme","window","matchMedia","matches","deleted_posts","show_post_labels","roles","accountRoles","map","role","name","includes","className","username","edited_at","postText","content","postUrl","url","emojis","forEach","emoji","replaceAll","shortcode","blog_url","btoa","avatar_static","display_name","card","media_attachments","length","media","index","type","altText","alt_text","description","replace","altTextBadge","width","height","cardSource","URL","hostname","html","image","title","poll","options","voteCounts","option","votes_count","voteCountMax","Math","max","votesTotal","reduce","total","num","pollOptionsCount","votesPortion","votesPercentage","multiple","round","voters_count","expired","toLocaleString","postDate","Date","created_at","postDateDate","toLocaleDateString","navigator","language","month","year","day","postDateTime","toLocaleTimeString","editDate","editDateText","editDateDate","editDateTime","show_metrics","reblogs_count","favourites_count","replies_count","innerHTML","lastUrl","entities","urls","extended_entities","urlAttachment","expanded_url","urlAttachmentProcessed","parentNode","replaceChild","id"],"sources":["renderPost.js"],"sourcesContent":["const renderPost = (post, container) => {\r\n  console.log(post);\r\n  if (!container) {\r\n    container = document.querySelector(\r\n      `blockquote[data-instance=\"${post.instance}\"][data-post-id=\"${post.post_id}\"]`\r\n    );\r\n  }\r\n\r\n  // post.post_data = JSON.parse(post.post_data);\r\n\r\n  // console.log('post.post_data', post.post_data);\r\n  // console.log('debug:renderPost', {data, container});\r\n\r\n  // if (post.post_data.post_id === '123456789'){\r\n  // console.log('debug:renderPost', data);\r\n  // }\r\n\r\n  let postHasLabels = false;\r\n  let postIsDeleted = false;\r\n  let postIsUpdated = false;\r\n\r\n  let accountIsBot = false;\r\n  let accountIsOwner = false;\r\n\r\n  let renderedPost = document.createElement(\"blockquote\");\r\n  let renderedPostHTML = \"\";\r\n\r\n  if (post.post_data.account.bot) {\r\n    accountIsBot = true;\r\n    postHasLabels = true;\r\n  }\r\n\r\n  if (post.__status) {\r\n    if (post.__status === \"deleted\") {\r\n      postIsDeleted = true;\r\n      postHasLabels = true;\r\n    }\r\n  }\r\n\r\n  if (\r\n    ftf_fediverse_embeds.config.theme === \"automatic\" &&\r\n    window.matchMedia(\"(prefers-color-scheme: dark)\").matches\r\n  ) {\r\n    renderedPost.dataset[\"bsTheme\"] = \"dark\";\r\n  } else {\r\n    renderedPost.dataset[\"bsTheme\"] = ftf_fediverse_embeds.config.theme;\r\n  }\r\n\r\n  if (postIsDeleted && ftf_fediverse_embeds.config.deleted_posts === \"redact\") {\r\n    post.post_data.account = {};\r\n  }\r\n\r\n  if (\r\n    ftf_fediverse_embeds.config.show_post_labels &&\r\n    post.post_data.account.roles\r\n  ) {\r\n    const accountRoles = post.post_data.account.roles.map((role) => role.name);\r\n    if (accountRoles.includes(\"Owner\")) {\r\n      accountIsOwner = true;\r\n      postHasLabels = true;\r\n    }\r\n  }\r\n\r\n  if (postIsDeleted && ftf_fediverse_embeds.config.deleted_posts === \"hide\") {\r\n    renderedPost.className = `fediverse-post fediverse-post-deleted`;\r\n\r\n    renderedPostHTML += /*html*/ `\r\n    <div\r\n      data-instance=\"$instance\"\r\n      data-post-id=\"$post_id\"\r\n      class=\"ftf-fediverse-post-embed-removed\"\r\n    >\r\n      <p>This post by @${post.post_data.account.username}@${post.instance} was removed.</p>\r\n    </div>\r\n    `;\r\n  } else {\r\n    renderedPost.className = `fediverse-post fediverse-post-rendered w-100 mt-4 mb-4`;\r\n\r\n    if (post.post_data.edited_at) {\r\n      postIsUpdated = true;\r\n      postHasLabels = true;\r\n    }\r\n\r\n    let postText = post.post_data.content,\r\n      postUrl = post.post_data.url,\r\n      entities = null;\r\n\r\n    renderedPostHTML += /*html*/ `\r\n          <div class=\"card w-100\">\r\n            <div class=\"post-body-wrapper card-body pt-4 pb-0\">\r\n              <div class=\"fediverse-post-labels position-absolute top-0 end-0 mt-1 me-1\">\r\n        `;\r\n\r\n    if (post.post_data.emojis) {\r\n      post.post_data.emojis.forEach((emoji) => {\r\n        postText = postText.replaceAll(\r\n          `:${emoji.shortcode}:`,\r\n          `<img class=\"fediverse-post-emoji\" src=\"${\r\n            window.ftf_fediverse_embeds.blog_url\r\n          }/wp-json/ftf/media-proxy?url=${window.btoa(emoji.url)}\" />`\r\n        );\r\n      });\r\n    }\r\n\r\n    if (postHasLabels) {\r\n      renderedPostHTML += /*html*/ `<span class=\"badge rounded-pill text-bg-light\">`;\r\n\r\n      if (postIsUpdated) {\r\n        renderedPostHTML += /*html*/ `\r\n        <span\r\n          class=\"p-0\"\r\n          title=\"This post was updated.\"\r\n          aria-label=\"Updated post\"\r\n        >üìù</span>\r\n      `;\r\n      }\r\n      if (postIsDeleted) {\r\n        renderedPostHTML += /*html*/ `\r\n        <span\r\n          class=\"p-0\"\r\n          title=\"This post was deleted.\"\r\n          aria-label=\"Deleted post\"\r\n        >üóëÔ∏è</span>\r\n      `;\r\n      }\r\n\r\n      if (accountIsBot) {\r\n        renderedPostHTML += /*html*/ `\r\n        <span\r\n          class=\"p-0\"\r\n          title=\"This is a bot account.\"\r\n          aria-label=\"Bot account\"\r\n        >ü§ñ</span>\r\n      `;\r\n      }\r\n\r\n      if (accountIsOwner) {\r\n        renderedPostHTML += /*html*/ `\r\n        <span\r\n          class=\"p-0\"\r\n          title=\"This is an admin account.\"\r\n          aria-label=\"Admin account\"\r\n        >üëë</span>\r\n      `;\r\n      }\r\n\r\n      renderedPostHTML += /*html*/ `</span>`;\r\n    }\r\n\r\n    renderedPostHTML += /*html*/ `\r\n      </div>\r\n      <div class=\"card-text\">\r\n        <div class=\"row no-gutters mb-1\">\r\n          <div class=\"d-flex\">\r\n            <div class=\"flex-shrink-0\">\r\n    `;\r\n\r\n    // console.log('debug:post', post);\r\n\r\n    if (post.post_data.account.avatar_static) {\r\n      if (\r\n        postIsDeleted &&\r\n        ftf_fediverse_embeds.config.deleted_posts === \"redact\"\r\n      ) {\r\n        // noop\r\n      } else {\r\n        renderedPostHTML += /*html*/ `\r\n            <a href=\"${post.post_data.account.url}\" class=\"text-decoration-none\">\r\n              <img\r\n                title=\"Profile image\"\r\n                alt=\"Profile image of @${\r\n                post.post_data.account.display_name ||\r\n                post.post_data.account.username\r\n                }\"\r\n                loading=\"lazy\"\r\n                class=\"post-author-image rounded-circle border\"\r\n                width=\"48\"\r\n                height=\"48\"\r\n                src=\"${\r\n                  window.ftf_fediverse_embeds.blog_url\r\n                }/wp-json/ftf/media-proxy?url=${window.btoa(\r\n                post.post_data.account.avatar_static\r\n              )}\"\r\n              >\r\n            </a>\r\n        `;\r\n      }\r\n    }\r\n\r\n\r\n    renderedPostHTML += /*html*/ `\r\n    </div>\r\n    <div class=\"flex-grow-1 ms-3\">  \r\n    `\r\n\r\n    if (\r\n      postIsDeleted &&\r\n      ftf_fediverse_embeds.config.deleted_posts === \"redact\"\r\n    ) {\r\n      renderedPostHTML += /*html*/ `\r\n      <div class=\"post-authorcol-12 col-sm-12 col-md-12 pb-3\">\r\n        <p class=\"font-weight-bold mb-0 mt-0\"></p>\r\n      </div>\r\n    `;\r\n    } else {\r\n      renderedPostHTML += /*html*/ `\r\n      <div class=\"post-author pb-3\">\r\n        <p class=\"font-weight-bold mb-0 mt-0\">\r\n          <a\r\n            class=\"text-dark text-decoration-none\"\r\n            href=\"${post.post_data.account.url}\"\r\n          >${post.post_data.account.display_name}</a>\r\n        </p>\r\n        <p class=\"mb-1 mb-md-2 mt-0 fs-6 text-break\">\r\n          <a class=\"text-muted text-decoration-none\" href=\"${\r\n            post.post_data.account.url\r\n          }\">\r\n            @${post.post_data.account.username}@${post.instance}\r\n          </a>\r\n        </p>\r\n      </div>\r\n    `;\r\n    }\r\n\r\n    renderedPostHTML += /*html*/ `\r\n        </div>\r\n      </div>\r\n    </div>\r\n    <div class=\"post-body\">`;\r\n\r\n    if (post.post_data.card) {\r\n      // console.log('debug:post.post_data.card', post.post_data.card);\r\n    }\r\n\r\n    if (\r\n      post.post_data.media_attachments &&\r\n      post.post_data.media_attachments.length\r\n    ) {\r\n      postText += /*html*/ `<div data-media-length=\"${post.post_data.media_attachments.length}\" class=\"post-media row mt-3 no-gutters\">`;\r\n\r\n      post.post_data.media_attachments.forEach((media, index) => {\r\n        // console.log('debug:media', media);\r\n\r\n        if (post.post_data.media_attachments.length === 1) {\r\n          postText += /*html*/ `<div data-media-type=\"${media.type}\" class=\"position-relative text-center col-sm-12 col-md-12 col-lg-12\">`;\r\n        } else if (post.post_data.media_attachments.length === 3) {\r\n          if (index === 2) {\r\n            postText += /*html*/ `<div data-media-type=\"${media.type}\" class=\"position-relative text-center col-sm-12 col-md-12 col-lg-12\">`;\r\n          } else {\r\n            postText += /*html*/ `<div data-media-type=\"${media.type}\" class=\"position-relative text-center col-sm-12 col-md-6 col-lg-6\">`;\r\n          }\r\n        } else if (\r\n          post.post_data.media_attachments.length > 1 &&\r\n          post.post_data.media_attachments.length < 5\r\n        ) {\r\n          postText += /*html*/ `<div data-media-type=\"${media.type}\" class=\"position-relative text-center col-sm-12 col-md-6 col-lg-6\">`;\r\n        } else {\r\n          postText += /*html*/ `<div data-media-type=\"${media.type}\" class=\"position-relative text-center col-sm-12 col-md-3 col-lg-3\">`;\r\n        }\r\n\r\n        const altText = (media.alt_text || media.description || \"\").replace(\r\n          /\"/g,\r\n          \"&quot;\"\r\n        );\r\n        let altTextBadge = \"\";\r\n\r\n        if (altText && altText.length) {\r\n          altTextBadge = /* html */ `\r\n          <span\r\n            aria-hidden=\"true\"\r\n            class=\"ftf-fediverse-post-alt-text position-absolute badge rounded-pill text-bg-dark\"\r\n            title=\"${altText}\"\r\n          >\r\n            ALT\r\n          </span>\r\n          `;\r\n        }\r\n\r\n        if (media.type === \"gifv\") {\r\n          postText += /*html*/ `<video class=\"w-100 mt-0\" controls loop>\r\n            <source src=\"${\r\n              window.ftf_fediverse_embeds.blog_url\r\n            }/wp-json/ftf/media-proxy?url=${window.btoa(\r\n            media.url\r\n          )}\" type=\"video/mp4\">\r\n          </video>\r\n          ${altTextBadge}\r\n          `;\r\n\r\n          // <source src=\"${ media.url }\" type=\"video/mp4\">\r\n          // <source src=\"${window.ftf_fediverse_embeds.blog_url}/wp-json/ftf/media-proxy?url=${ window.btoa(media.url) }\" type=\"video/mp4\">\r\n        } else if (media.type === \"video\") {\r\n          if (media.url) {\r\n            // src=\"${window.ftf_fediverse_embeds.blog_url}/wp-json/ftf/media-proxy?url=${ window.btoa(media.url) }\"\r\n            // src=\"${ media.url }\"\r\n\r\n            postText += /*html*/ `<video class=\"w-100 mt-0\" controls loop>\r\n              <source\r\n                src=\"${\r\n                  window.ftf_fediverse_embeds.blog_url\r\n                }/wp-json/ftf/media-proxy?url=${window.btoa(media.url)}\"\r\n                type=\"video/mp4\"\r\n              >\r\n              </video>\r\n              ${altTextBadge}              \r\n              `;\r\n          }\r\n        } else if (media.type === \"audio\") {\r\n          if (media.url) {\r\n            // src=\"${window.ftf_fediverse_embeds.blog_url}/wp-json/ftf/media-proxy?url=${ window.btoa(media.url) }\"\r\n            // src=\"${ media.url }\"\r\n\r\n            postText += /*html*/ `\r\n              <audio\r\n                controls\r\n                src=\"${\r\n                  window.ftf_fediverse_embeds.blog_url\r\n                }/wp-json/ftf/media-proxy?url=${window.btoa(media.url)}\"\r\n                class=\"w-100 mt-3 mb-3\"\r\n              ></audio>\r\n            `;\r\n          }\r\n        } else if (media.type === \"image\") {\r\n          // console.log(\"debug:media\", media);\r\n          postText += /*html*/ `<a href=\"${postUrl}\" target=\"_blank\">\r\n            <img\r\n              alt=\"${altText}\"\r\n              loading=\"lazy\"\r\n              width=\"${media.width}\"\r\n              height=\"${media.height}\"\r\n              class=\"w-100 rounded border mb-3\"\r\n              src=\"${\r\n                window.ftf_fediverse_embeds.blog_url\r\n              }/wp-json/ftf/media-proxy?url=${window.btoa(media.url)}\"\r\n            >\r\n            ${altTextBadge}\r\n         </a> \r\n          `;\r\n        }\r\n\r\n        postText += /*html*/ \"</div>\";\r\n      });\r\n\r\n      postText += /*html*/ \"</div>\";\r\n    } else if (post.post_data.card) {\r\n      let cardSource;\r\n\r\n      if (post.post_data.card.url) {\r\n        cardSource = new URL(post.post_data.card.url);\r\n        cardSource = cardSource.hostname;\r\n      }\r\n\r\n      if (post.post_data.card.html) {\r\n        postText += /*html*/ `<div class=\"ratio ratio-16x9\">${post.post_data.card.html}</div>`;\r\n      } else if (post.post_data.card.image) {\r\n        postText += /*html*/ `\r\n        <div class=\"card mb-4\">\r\n          <a href=\"${post.post_data.card.url}\">\r\n            <img src=\"${\r\n              window.ftf_fediverse_embeds.blog_url\r\n            }/wp-json/ftf/media-proxy?url=${window.btoa(\r\n          post.post_data.card.image\r\n        )}\" class=\"card-img-top\" alt=\"...\">\r\n          </a>\r\n          <div class=\"card-body pb-1\">\r\n            <h5 class=\"card-title\">\r\n              <a href=\"${post.post_data.card.url}\">\r\n                ${post.post_data.card.title}\r\n              </a>\r\n            </h5>\r\n            <p class=\"card-text\"><small>${\r\n              post.post_data.card.description\r\n            }</small></p>\r\n          </div>\r\n          <div class=\"card-footer pb-3 pt-0\">\r\n            <small class=\"text-muted\">\r\n              ${cardSource}\r\n            </div>\r\n        </div>\r\n        `;\r\n      } else {\r\n        postText += /*html*/ `\r\n        <div class=\"card mb-4\">\r\n        <div class=\"card-body pb-1\">\r\n            <h5 class=\"card-title\">\r\n              <a href=\"${post.post_data.card.url}\">\r\n                ${post.post_data.card.title}\r\n              </a>\r\n            </h5>\r\n            <p class=\"card-text\"><small>${post.post_data.card.description}</small></p>\r\n          </div>\r\n          <div class=\"card-footer pb-3 pt-0\">\r\n            <small class=\"text-muted\">\r\n              ${cardSource}\r\n            </div>\r\n        </div>\r\n        `;\r\n      }\r\n    }\r\n\r\n    if (post.post_data.poll) {\r\n      postText += /*html*/ '<div class=\"mt-0 post-poll-results\">';\r\n\r\n      if (post.post_data.poll.options && post.post_data.poll.options.length) {\r\n        const voteCounts = post.post_data.poll.options.map((option) => {\r\n          return option.votes_count;\r\n        });\r\n\r\n        const voteCountMax = Math.max(...voteCounts);\r\n        const votesTotal = voteCounts.reduce((total, num) => {\r\n          return total + num;\r\n        });\r\n\r\n        postText += /*html*/ `<div class=\"row\">`;\r\n\r\n        const pollOptionsCount = post.post_data.poll.options;\r\n\r\n        post.post_data.poll.options.forEach((option, index) => {\r\n          let votesPortion;\r\n          let votesPercentage;\r\n          // votesPercentage = post.post_data.poll.expired ? `${Math.round(option.votes_count/votesTotal * 100)}%` : '';\r\n\r\n          if (post.post_data.poll.multiple) {\r\n            votesPercentage = `${Math.round(\r\n              (option.votes_count / post.post_data.poll.voters_count) * 100\r\n            )}%`;\r\n            votesPortion =\r\n              (option.votes_count / post.post_data.poll.voters_count) * 100;\r\n          } else {\r\n            votesPercentage = `${Math.round(\r\n              (option.votes_count / votesTotal) * 100\r\n            )}%`;\r\n            votesPortion = (option.votes_count / votesTotal) * 100;\r\n          }\r\n\r\n          postText += /*html*/ `\r\n            <div class=\"col-9\">\r\n              <p class=\"mb-2\">${option.title}</p>\r\n            </div>\r\n            <div class=\"col-3 text-end\">\r\n              <span class=\"w-100\">${votesPercentage}</span>\r\n            </div>\r\n            <div class=\"col-12\">\r\n              <div\r\n                class=\"progress ${\r\n                  index === pollOptionsCount - 1 ? \"\" : \" mb-3 \"\r\n                }\"\r\n              >\r\n                <div class=\"progress-bar ${\r\n                  // post.post_data.poll.expired && option.votes_count === voteCountMax ? 'bg-primary' : ''\r\n                  post.post_data.poll.expired &&\r\n                  option.votes_count === voteCountMax\r\n                    ? \"bg-primary\"\r\n                    : \"\"\r\n                }\" \r\n                  role=\"progressbar\" \r\n                  xxxstyle=\"width: ${\r\n                    post.post_data.poll.expired ? votesPortion : 0\r\n                  }%\" \r\n                  xxxaria-valuenow=\"${\r\n                    post.post_data.poll.expired ? votesPortion : 0\r\n                  }\" \r\n                  style=\"width: ${votesPortion}%\" \r\n                  aria-valuenow=\"${votesPortion}\" \r\n                  aria-valuemin=\"0\" \r\n                  aria-valuemax=\"100\">\r\n                </div>\r\n              </div>\r\n            </div>\r\n        `;\r\n        });\r\n        postText += /*html*/ `<div class=\"col-12 mt-3\">\r\n          <p class=\"text-muted\">\r\n            <small>\r\n              ${votesTotal.toLocaleString()} votes | ${\r\n          post.post_data.poll.expired ? \"Closed\" : \"Open\"\r\n        }\r\n            </small>\r\n          </p>\r\n        </div>`;\r\n      }\r\n\r\n      postText += /*html*/ \"</div></div>\";\r\n    }\r\n\r\n    const postDate = new Date(post.post_data.created_at);\r\n    const postDateDate = postDate.toLocaleDateString(navigator.language, {\r\n      month: \"long\",\r\n      year: \"numeric\",\r\n      day: \"numeric\",\r\n    });\r\n    const postDateTime = postDate.toLocaleTimeString();\r\n\r\n    let editDate, editDateText;\r\n\r\n    if (postIsUpdated) {\r\n      editDate = new Date(post.post_data.edited_at);\r\n      const editDateDate = editDate.toLocaleDateString(navigator.language, {\r\n        month: \"long\",\r\n        year: \"numeric\",\r\n        day: \"numeric\",\r\n      });\r\n      const editDateTime = editDate.toLocaleTimeString();\r\n      editDateText = `Updated on ${editDateDate} at ${editDateTime}`;\r\n    }\r\n\r\n    renderedPostHTML +=\r\n      /*html*/ postText +\r\n      `</div>\r\n        </div>\r\n      </div>\r\n    <div class=\"card-footer pb-3\"><small>`;\r\n\r\n    // if (!container){\r\n    if (ftf_fediverse_embeds.config.show_metrics) {\r\n      if (\r\n        postIsDeleted &&\r\n        ftf_fediverse_embeds.config.deleted_posts === \"redact\"\r\n      ) {\r\n      } else {\r\n        renderedPostHTML += /*html*/ `\r\n          <small>\r\n            <span class=\"post-icon\" role=\"img\" aria-label=\"Reposts\">üîÅ</span>\r\n            <span class=\"text-muted\">${post.post_data.reblogs_count.toLocaleString()}</span>\r\n            \r\n            <span class=\"post-icon\" role=\"img\" aria-label=\"Likes\">‚ù§Ô∏è</span>\r\n            <span class=\"text-muted\">${post.post_data.favourites_count.toLocaleString()}</span>\r\n            \r\n            <span class=\"post-icon\" role=\"img\" aria-label=\"Replies\">üí¨</span>\r\n            <span class=\"text-muted\">${post.post_data.replies_count.toLocaleString()}</span>\r\n          </small>\r\n          &centerdot; `;\r\n      }\r\n    }\r\n    // }\r\n\r\n    if (\r\n      postIsDeleted &&\r\n      ftf_fediverse_embeds.config.deleted_posts === \"redact\"\r\n    ) {\r\n      renderedPostHTML += /*html*/ `\r\n      <small>\r\n        This post was deleted.\r\n      </small>\r\n    `;\r\n    } else {\r\n      renderedPostHTML += /*html*/ `<a class=\"text-muted\" href=\"${postUrl}\" target=\"_blank\">\r\n        <small title=\"${editDate ? editDateText : \"\"}\">\r\n          ${postDateDate} at ${postDateTime}${editDate ? \"*\" : \"\"}\r\n        </small>\r\n      </a>`;\r\n    }\r\n\r\n    renderedPostHTML += /*html*/ \"</small></div></div>\";\r\n  }\r\n\r\n  renderedPost.innerHTML = renderedPostHTML;\r\n\r\n  let lastUrl = \"\";\r\n\r\n  if (post.entities && post.entities.urls && post.entities.urls.length) {\r\n    lastUrl = post.entities.urls[post.entities.urls.length - 1];\r\n  }\r\n\r\n  if (\r\n    (post.post_data.media_attachments &&\r\n      post.post_data.media_attachments.length) ||\r\n    (post.extended_entities &&\r\n      post.extended_entities.media &&\r\n      post.extended_entities.media.length)\r\n  ) {\r\n    lastUrl = \"\";\r\n  }\r\n\r\n  if (lastUrl) {\r\n    renderedPost.dataset.urlAttachment = lastUrl.expanded_url;\r\n    renderedPost.dataset.urlAttachmentProcessed = \"false\";\r\n  }\r\n\r\n  if (container) {\r\n    const postContainer = container.querySelector(\".post-body a:last-of-type\");\r\n    container.parentNode.replaceChild(renderedPost, container);\r\n  } else {\r\n    const post = document.querySelector(`[data-post-id=\"${post.id}\"]`);\r\n    post.parentNode.replaceChild(renderedPost, post);\r\n  }\r\n\r\n  return renderedPost;\r\n};\r\n\r\nexport { renderPost };\r\n"],"mappings":"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"}