{"version":3,"file":"renderPost.js","names":["renderPost","post","container","document","querySelector","concat","instance","post_id","postHasLabels","postIsDeleted","postIsUpdated","accountIsBot","accountIsOwner","renderedPost","createElement","renderedPostHTML","ftf_fediverse_embeds","config","theme","dataset","bsTheme","deleted_posts","post_data","account","show_post_labels","roles","accountRoles","map","role","name","includes","bot","__status","className","username","edited_at","postText","content","postUrl","url","emojis","forEach","emoji","replaceAll","shortcode","window","blog_url","btoa","avatar_static","display_name","card","media_attachments","length","media","index","type","altText","alt_text","description","replace","altTextBadge","width","height","cardSource","URL","hostname","html","image","title","poll","options","voteCounts","option","votes_count","voteCountMax","Math","max","votesTotal","reduce","total","num","pollOptionsCount","votesPortion","votesPercentage","multiple","round","voters_count","expired","toLocaleString","postDate","Date","created_at","postDateDate","toLocaleDateString","navigator","language","month","year","day","postDateTime","toLocaleTimeString","editDate","editDateText","editDateDate","editDateTime","show_metrics","reblogs_count","favourites_count","replies_count","innerHTML","lastUrl","entities","urls","extended_entities","urlAttachment","expanded_url","urlAttachmentProcessed","parentNode","replaceChild","id"],"sources":["renderPost.js"],"sourcesContent":["const renderPost = (post, container) => {\r\n  if (!container) {\r\n    container = document.querySelector(\r\n      `blockquote[data-instance=\"${post.instance}\"][data-post-id=\"${post.post_id}\"]`\r\n    );\r\n  }\r\n\r\n  // post.post_data = JSON.parse(post.post_data);\r\n\r\n  // console.log('post.post_data', post.post_data);\r\n  // console.log('debug:renderPost', {data, container});\r\n\r\n  // if (post.post_data.post_id === '123456789'){\r\n  // console.log('debug:renderPost', data);\r\n  // }\r\n\r\n  let postHasLabels = false;\r\n  let postIsDeleted = false;\r\n  let postIsUpdated = false;\r\n\r\n  let accountIsBot = false;\r\n  let accountIsOwner = false;\r\n\r\n  let renderedPost = document.createElement(\"blockquote\");\r\n  let renderedPostHTML = \"\";\r\n\r\n  if (ftf_fediverse_embeds.config.theme !== \"automatic\") {\r\n    renderedPost.dataset[\"bsTheme\"] = ftf_fediverse_embeds.config.theme;\r\n  }\r\n\r\n  if (postIsDeleted && ftf_fediverse_embeds.config.deleted_posts === \"redact\") {\r\n    post.post_data.account = {};\r\n  }\r\n\r\n  if (\r\n    ftf_fediverse_embeds.config.show_post_labels &&\r\n    post.post_data.account.roles\r\n  ) {\r\n    const accountRoles = post.post_data.account.roles.map((role) => role.name);\r\n    if (accountRoles.includes(\"Owner\")) {\r\n      accountIsOwner = true;\r\n      postHasLabels = true;\r\n    }\r\n  }\r\n\r\n  if (post.post_data.account.bot) {\r\n    accountIsBot = true;\r\n    postHasLabels = true;\r\n  }\r\n\r\n  if (post.__status) {\r\n    if (post.__status === \"deleted\") {\r\n      postIsDeleted = true;\r\n      postHasLabels = true;\r\n    }\r\n  }\r\n\r\n  if (postIsDeleted && ftf_fediverse_embeds.config.deleted_posts === \"hide\") {\r\n    renderedPost.className = `fediverse-post fediverse-post-deleted`;\r\n\r\n    renderedPostHTML += /*html*/ `\r\n    <div\r\n      data-instance=\"$instance\"\r\n      data-post-id=\"$post_id\"\r\n      class=\"ftf-fediverse-post-embed-removed\"\r\n    >\r\n      <p>This post by @${post.post_data.account.username}@${post.instance} was removed.</p>\r\n    </div>\r\n    `;\r\n  } else {\r\n    renderedPost.className = `fediverse-post fediverse-post-rendered w-100 mt-4 mb-4`;\r\n\r\n    if (post.post_data.edited_at) {\r\n      postIsUpdated = true;\r\n      postHasLabels = true;\r\n    }\r\n\r\n    let postText = post.post_data.content,\r\n      postUrl = post.post_data.url,\r\n      entities = null;\r\n\r\n    renderedPostHTML += /*html*/ `\r\n          <div class=\"card w-100\">\r\n            <div class=\"post-body-wrapper card-body pt-4 pb-0\">\r\n              <div class=\"fediverse-post-labels position-absolute top-0 end-0 mt-1 me-1\">\r\n        `;\r\n\r\n    if (post.post_data.emojis) {\r\n      post.post_data.emojis.forEach((emoji) => {\r\n        postText = postText.replaceAll(\r\n          `:${emoji.shortcode}:`,\r\n          `<img class=\"fediverse-post-emoji\" src=\"${\r\n            window.ftf_fediverse_embeds.blog_url\r\n          }/wp-json/ftf/media-proxy?url=${window.btoa(emoji.url)}\" />`\r\n        );\r\n      });\r\n    }\r\n\r\n    if (postHasLabels) {\r\n      renderedPostHTML += /*html*/ `<span class=\"badge rounded-pill text-bg-light\">`;\r\n\r\n      if (postIsUpdated) {\r\n        renderedPostHTML += /*html*/ `\r\n        <span\r\n          class=\"p-0\"\r\n          title=\"This post was updated.\"\r\n          aria-label=\"Updated post\"\r\n        >üìù</span>\r\n      `;\r\n      }\r\n      if (postIsDeleted) {\r\n        renderedPostHTML += /*html*/ `\r\n        <span\r\n          class=\"p-0\"\r\n          title=\"This post was deleted.\"\r\n          aria-label=\"Deleted post\"\r\n        >üóëÔ∏è</span>\r\n      `;\r\n      }\r\n\r\n      if (accountIsBot) {\r\n        renderedPostHTML += /*html*/ `\r\n        <span\r\n          class=\"p-0\"\r\n          title=\"This is a bot account.\"\r\n          aria-label=\"Bot account\"\r\n        >ü§ñ</span>\r\n      `;\r\n      }\r\n\r\n      if (accountIsOwner) {\r\n        renderedPostHTML += /*html*/ `\r\n        <span\r\n          class=\"p-0\"\r\n          title=\"This is an admin account.\"\r\n          aria-label=\"Admin account\"\r\n        >üëë</span>\r\n      `;\r\n      }\r\n\r\n      renderedPostHTML += /*html*/ `</span>`;\r\n    }\r\n\r\n    renderedPostHTML += /*html*/ `\r\n      </div>\r\n      <div class=\"card-text\">\r\n      <div class=\"row no-gutters mb-1\">\r\n    `;\r\n\r\n    // console.log('debug:post', post);\r\n\r\n    if (post.post_data.account.avatar_static) {\r\n      if (\r\n        postIsDeleted &&\r\n        ftf_fediverse_embeds.config.deleted_posts === \"redact\"\r\n      ) {\r\n        // noop\r\n      } else {\r\n        renderedPostHTML += /*html*/ `\r\n        <div class=\"fediverse-post-profile-image-wrapper col-2 col-sm-2 col-md-2 p-2 pt-0 ps-sm-1 pe-sm-1 ps-md-2 pe-md-1 ps-lg-3 pe-lg-1\">\r\n          <a href=\"${post.post_data.account.url}\" class=\"text-decoration-none\">\r\n            <img\r\n              title=\"Profile image\"\r\n              alt=\"Profile image of @${\r\n                post.post_data.account.display_name ||\r\n                post.post_data.account.username\r\n              }\"\r\n              loading=\"lazy\"\r\n              class=\"post-author-image rounded-circle border\"\r\n              width=\"48\"\r\n              height=\"48\"\r\n              src=\"${\r\n                window.ftf_fediverse_embeds.blog_url\r\n              }/wp-json/ftf/media-proxy?url=${window.btoa(\r\n          post.post_data.account.avatar_static\r\n        )}\"\r\n            >\r\n          </a>\r\n        </div>`;\r\n      }\r\n    }\r\n\r\n    if (\r\n      postIsDeleted &&\r\n      ftf_fediverse_embeds.config.deleted_posts === \"redact\"\r\n    ) {\r\n      renderedPostHTML += /*html*/ `\r\n      <div class=\"post-authorcol-12 col-sm-12 col-md-12 pb-3\">\r\n        <p class=\"font-weight-bold mb-0 mt-0\"></p>\r\n      </div>\r\n    `;\r\n    } else {\r\n      renderedPostHTML += /*html*/ `\r\n      <div class=\"post-author ${\r\n        post.post_data.account.avatar_static\r\n          ? \"col-10 col-sm-10 col-md-10 pl-2\"\r\n          : \"col-12 col-sm-12 col-md-12\"\r\n      } pb-3\">\r\n        <p class=\"font-weight-bold mb-0 mt-0\">\r\n          <a\r\n            class=\"text-dark text-decoration-none\"\r\n            href=\"${post.post_data.account.url}\"\r\n          >${post.post_data.account.display_name}</a>\r\n        </p>\r\n        <p class=\"mb-1 mb-md-2 mt-0 fs-6\">\r\n          <a class=\"text-muted text-decoration-none\" href=\"${\r\n            post.post_data.account.url\r\n          }\">\r\n            @${post.post_data.account.username}@${post.instance}\r\n          </a>\r\n        </p>\r\n      </div>\r\n    `;\r\n    }\r\n\r\n    renderedPostHTML += /*html*/ `\r\n    </div>\r\n    <div class=\"post-body\">`;\r\n\r\n    if (post.post_data.card) {\r\n      // console.log('debug:post.post_data.card', post.post_data.card);\r\n    }\r\n\r\n    if (\r\n      post.post_data.media_attachments &&\r\n      post.post_data.media_attachments.length\r\n    ) {\r\n      postText += /*html*/ `<div data-media-length=\"${post.post_data.media_attachments.length}\" class=\"post-media row mt-3 no-gutters\">`;\r\n\r\n      post.post_data.media_attachments.forEach((media, index) => {\r\n        // console.log('debug:media', media);\r\n\r\n        if (post.post_data.media_attachments.length === 1) {\r\n          postText += /*html*/ `<div data-media-type=\"${media.type}\" class=\"position-relative text-center col-sm-12 col-md-12 col-lg-12\">`;\r\n        } else if (post.post_data.media_attachments.length === 3) {\r\n          if (index === 2) {\r\n            postText += /*html*/ `<div data-media-type=\"${media.type}\" class=\"position-relative text-center col-sm-12 col-md-12 col-lg-12\">`;\r\n          } else {\r\n            postText += /*html*/ `<div data-media-type=\"${media.type}\" class=\"position-relative text-center col-sm-12 col-md-6 col-lg-6\">`;\r\n          }\r\n        } else if (\r\n          post.post_data.media_attachments.length > 1 &&\r\n          post.post_data.media_attachments.length < 5\r\n        ) {\r\n          postText += /*html*/ `<div data-media-type=\"${media.type}\" class=\"position-relative text-center col-sm-12 col-md-6 col-lg-6\">`;\r\n        } else {\r\n          postText += /*html*/ `<div data-media-type=\"${media.type}\" class=\"position-relative text-center col-sm-12 col-md-3 col-lg-3\">`;\r\n        }\r\n\r\n        const altText = (media.alt_text || media.description || \"\").replace(\r\n          /\"/g,\r\n          \"&quot;\"\r\n        );\r\n        let altTextBadge = \"\";\r\n\r\n        if (altText && altText.length) {\r\n          altTextBadge = /* html */ `\r\n          <span\r\n            aria-hidden=\"true\"\r\n            class=\"ftf-fediverse-post-alt-text position-absolute badge rounded-pill text-bg-dark\"\r\n            title=\"${altText}\"\r\n          >\r\n            ALT\r\n          </span>\r\n          `;\r\n        }\r\n\r\n        if (media.type === \"gifv\") {\r\n          postText += /*html*/ `<video class=\"w-100 mt-0\" controls loop>\r\n            <source src=\"${\r\n              window.ftf_fediverse_embeds.blog_url\r\n            }/wp-json/ftf/media-proxy?url=${window.btoa(\r\n            media.url\r\n          )}\" type=\"video/mp4\">\r\n          </video>\r\n          ${altTextBadge}\r\n          `;\r\n\r\n          // <source src=\"${ media.url }\" type=\"video/mp4\">\r\n          // <source src=\"${window.ftf_fediverse_embeds.blog_url}/wp-json/ftf/media-proxy?url=${ window.btoa(media.url) }\" type=\"video/mp4\">\r\n        } else if (media.type === \"video\") {\r\n          if (media.url) {\r\n            // src=\"${window.ftf_fediverse_embeds.blog_url}/wp-json/ftf/media-proxy?url=${ window.btoa(media.url) }\"\r\n            // src=\"${ media.url }\"\r\n\r\n            postText += /*html*/ `<video class=\"w-100 mt-0\" controls loop>\r\n              <source\r\n                src=\"${\r\n                  window.ftf_fediverse_embeds.blog_url\r\n                }/wp-json/ftf/media-proxy?url=${window.btoa(media.url)}\"\r\n                type=\"video/mp4\"\r\n              >\r\n              </video>\r\n              ${altTextBadge}              \r\n              `;\r\n          }\r\n        } else if (media.type === \"audio\") {\r\n          if (media.url) {\r\n            // src=\"${window.ftf_fediverse_embeds.blog_url}/wp-json/ftf/media-proxy?url=${ window.btoa(media.url) }\"\r\n            // src=\"${ media.url }\"\r\n\r\n            postText += /*html*/ `\r\n              <audio\r\n                controls\r\n                src=\"${\r\n                  window.ftf_fediverse_embeds.blog_url\r\n                }/wp-json/ftf/media-proxy?url=${window.btoa(media.url)}\"\r\n                class=\"w-100 mt-3 mb-3\"\r\n              ></audio>\r\n            `;\r\n          }\r\n        } else if (media.type === \"image\") {\r\n          // console.log(\"debug:media\", media);\r\n          postText += /*html*/ `<a href=\"${postUrl}\" target=\"_blank\">\r\n            <img\r\n              alt=\"${altText}\"\r\n              loading=\"lazy\"\r\n              width=\"${media.width}\"\r\n              height=\"${media.height}\"\r\n              class=\"w-100 rounded border mb-3\"\r\n              src=\"${\r\n                window.ftf_fediverse_embeds.blog_url\r\n              }/wp-json/ftf/media-proxy?url=${window.btoa(media.url)}\"\r\n            >\r\n            ${altTextBadge}\r\n         </a> \r\n          `;\r\n        }\r\n\r\n        postText += /*html*/ \"</div>\";\r\n      });\r\n\r\n      postText += /*html*/ \"</div>\";\r\n    } else if (post.post_data.card) {\r\n      let cardSource;\r\n\r\n      if (post.post_data.card.url) {\r\n        cardSource = new URL(post.post_data.card.url);\r\n        cardSource = cardSource.hostname;\r\n      }\r\n\r\n      if (post.post_data.card.html) {\r\n        postText += /*html*/ `<div class=\"ratio ratio-16x9\">${post.post_data.card.html}</div>`;\r\n      } else if (post.post_data.card.image) {\r\n        postText += /*html*/ `\r\n        <div class=\"card mb-4\">\r\n          <a href=\"${post.post_data.card.url}\">\r\n            <img src=\"${\r\n              window.ftf_fediverse_embeds.blog_url\r\n            }/wp-json/ftf/media-proxy?url=${window.btoa(\r\n          post.post_data.card.image\r\n        )}\" class=\"card-img-top\" alt=\"...\">\r\n          </a>\r\n          <div class=\"card-body pb-1\">\r\n            <h5 class=\"card-title\">\r\n              <a href=\"${post.post_data.card.url}\">\r\n                ${post.post_data.card.title}\r\n              </a>\r\n            </h5>\r\n            <p class=\"card-text\"><small>${\r\n              post.post_data.card.description\r\n            }</small></p>\r\n          </div>\r\n          <div class=\"card-footer pb-3 pt-0\">\r\n            <small class=\"text-muted\">\r\n              ${cardSource}\r\n            </div>\r\n        </div>\r\n        `;\r\n      } else {\r\n        postText += /*html*/ `\r\n        <div class=\"card mb-4\">\r\n        <div class=\"card-body pb-1\">\r\n            <h5 class=\"card-title\">\r\n              <a href=\"${post.post_data.card.url}\">\r\n                ${post.post_data.card.title}\r\n              </a>\r\n            </h5>\r\n            <p class=\"card-text\"><small>${post.post_data.card.description}</small></p>\r\n          </div>\r\n          <div class=\"card-footer pb-3 pt-0\">\r\n            <small class=\"text-muted\">\r\n              ${cardSource}\r\n            </div>\r\n        </div>\r\n        `;\r\n      }\r\n    }\r\n\r\n    if (post.post_data.poll) {\r\n      postText += /*html*/ '<div class=\"mt-0 post-poll-results\">';\r\n\r\n      if (post.post_data.poll.options && post.post_data.poll.options.length) {\r\n        const voteCounts = post.post_data.poll.options.map((option) => {\r\n          return option.votes_count;\r\n        });\r\n\r\n        const voteCountMax = Math.max(...voteCounts);\r\n        const votesTotal = voteCounts.reduce((total, num) => {\r\n          return total + num;\r\n        });\r\n\r\n        postText += /*html*/ `<div class=\"row\">`;\r\n\r\n        const pollOptionsCount = post.post_data.poll.options;\r\n\r\n        post.post_data.poll.options.forEach((option, index) => {\r\n          let votesPortion;\r\n          let votesPercentage;\r\n          // votesPercentage = post.post_data.poll.expired ? `${Math.round(option.votes_count/votesTotal * 100)}%` : '';\r\n\r\n          if (post.post_data.poll.multiple) {\r\n            votesPercentage = `${Math.round(\r\n              (option.votes_count / post.post_data.poll.voters_count) * 100\r\n            )}%`;\r\n            votesPortion =\r\n              (option.votes_count / post.post_data.poll.voters_count) * 100;\r\n          } else {\r\n            votesPercentage = `${Math.round(\r\n              (option.votes_count / votesTotal) * 100\r\n            )}%`;\r\n            votesPortion = (option.votes_count / votesTotal) * 100;\r\n          }\r\n\r\n          postText += /*html*/ `\r\n            <div class=\"col-9\">\r\n              <p class=\"mb-2\">${option.title}</p>\r\n            </div>\r\n            <div class=\"col-3 text-end\">\r\n              <span class=\"w-100\">${votesPercentage}</span>\r\n            </div>\r\n            <div class=\"col-12\">\r\n              <div\r\n                class=\"progress ${\r\n                  index === pollOptionsCount - 1 ? \"\" : \" mb-3 \"\r\n                }\"\r\n              >\r\n                <div class=\"progress-bar ${\r\n                  // post.post_data.poll.expired && option.votes_count === voteCountMax ? 'bg-primary' : ''\r\n                  post.post_data.poll.expired &&\r\n                  option.votes_count === voteCountMax\r\n                    ? \"bg-primary\"\r\n                    : \"\"\r\n                }\" \r\n                  role=\"progressbar\" \r\n                  xxxstyle=\"width: ${\r\n                    post.post_data.poll.expired ? votesPortion : 0\r\n                  }%\" \r\n                  xxxaria-valuenow=\"${\r\n                    post.post_data.poll.expired ? votesPortion : 0\r\n                  }\" \r\n                  style=\"width: ${votesPortion}%\" \r\n                  aria-valuenow=\"${votesPortion}\" \r\n                  aria-valuemin=\"0\" \r\n                  aria-valuemax=\"100\">\r\n                </div>\r\n              </div>\r\n            </div>\r\n        `;\r\n        });\r\n        postText += /*html*/ `<div class=\"col-12 mt-3\">\r\n          <p class=\"text-muted\">\r\n            <small>\r\n              ${votesTotal.toLocaleString()} votes | ${\r\n          post.post_data.poll.expired ? \"Closed\" : \"Open\"\r\n        }\r\n            </small>\r\n          </p>\r\n        </div>`;\r\n      }\r\n\r\n      postText += /*html*/ \"</div></div>\";\r\n    }\r\n\r\n    const postDate = new Date(post.post_data.created_at);\r\n    const postDateDate = postDate.toLocaleDateString(navigator.language, {\r\n      month: \"long\",\r\n      year: \"numeric\",\r\n      day: \"numeric\",\r\n    });\r\n    const postDateTime = postDate.toLocaleTimeString();\r\n\r\n    let editDate, editDateText;\r\n\r\n    if (postIsUpdated) {\r\n      editDate = new Date(post.post_data.edited_at);\r\n      const editDateDate = editDate.toLocaleDateString(navigator.language, {\r\n        month: \"long\",\r\n        year: \"numeric\",\r\n        day: \"numeric\",\r\n      });\r\n      const editDateTime = editDate.toLocaleTimeString();\r\n      editDateText = `Updated on ${editDateDate} at ${editDateTime}`;\r\n    }\r\n\r\n    renderedPostHTML +=\r\n      /*html*/ postText +\r\n      `</div>\r\n        </div>\r\n      </div>\r\n    <div class=\"card-footer pb-3\"><small>`;\r\n\r\n    // if (!container){\r\n    if (ftf_fediverse_embeds.config.show_metrics) {\r\n      if (\r\n        postIsDeleted &&\r\n        ftf_fediverse_embeds.config.deleted_posts === \"redact\"\r\n      ) {\r\n      } else {\r\n        renderedPostHTML += /*html*/ `\r\n          <small>\r\n            <span class=\"post-icon\" role=\"img\" aria-label=\"Reposts\">üîÅ</span>\r\n            <span class=\"text-muted\">${post.post_data.reblogs_count.toLocaleString()}</span>\r\n            \r\n            <span class=\"post-icon\" role=\"img\" aria-label=\"Likes\">‚ù§Ô∏è</span>\r\n            <span class=\"text-muted\">${post.post_data.favourites_count.toLocaleString()}</span>\r\n            \r\n            <span class=\"post-icon\" role=\"img\" aria-label=\"Replies\">üí¨</span>\r\n            <span class=\"text-muted\">${post.post_data.replies_count.toLocaleString()}</span>\r\n          </small>\r\n          &centerdot; `;\r\n      }\r\n    }\r\n    // }\r\n\r\n    if (\r\n      postIsDeleted &&\r\n      ftf_fediverse_embeds.config.deleted_posts === \"redact\"\r\n    ) {\r\n      renderedPostHTML += /*html*/ `\r\n      <small>\r\n        This post was deleted.\r\n      </small>\r\n    `;\r\n    } else {\r\n      renderedPostHTML += /*html*/ `<a class=\"text-muted\" href=\"${postUrl}\" target=\"_blank\">\r\n        <small title=\"${editDate ? editDateText : \"\"}\">\r\n          ${postDateDate} at ${postDateTime}${editDate ? \"*\" : \"\"}\r\n        </small>\r\n      </a>`;\r\n    }\r\n\r\n    renderedPostHTML += /*html*/ \"</small></div></div>\";\r\n  }\r\n\r\n  renderedPost.innerHTML = renderedPostHTML;\r\n\r\n  let lastUrl = \"\";\r\n\r\n  if (post.entities && post.entities.urls && post.entities.urls.length) {\r\n    lastUrl = post.entities.urls[post.entities.urls.length - 1];\r\n  }\r\n\r\n  if (\r\n    (post.post_data.media_attachments &&\r\n      post.post_data.media_attachments.length) ||\r\n    (post.extended_entities &&\r\n      post.extended_entities.media &&\r\n      post.extended_entities.media.length)\r\n  ) {\r\n    lastUrl = \"\";\r\n  }\r\n\r\n  if (lastUrl) {\r\n    renderedPost.dataset.urlAttachment = lastUrl.expanded_url;\r\n    renderedPost.dataset.urlAttachmentProcessed = \"false\";\r\n  }\r\n\r\n  if (container) {\r\n    const postContainer = container.querySelector(\".post-body a:last-of-type\");\r\n    container.parentNode.replaceChild(renderedPost, container);\r\n  } else {\r\n    const post = document.querySelector(`[data-post-id=\"${post.id}\"]`);\r\n    post.parentNode.replaceChild(renderedPost, post);\r\n  }\r\n\r\n  return renderedPost;\r\n};\r\n\r\nexport { renderPost };\r\n"],"mappings":"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"}